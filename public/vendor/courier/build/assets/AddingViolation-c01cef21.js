import{r as o,d as u,a as s,F as M,j as e}from"./app-2dcd630c.js";import{u as B}from"./index-b4340aed.js";import{u as E,M as T,l as P,a as W,b as q}from"./index-b6a7a892.js";import"./index-dcfd7a56.js";import"./transition-ec926525.js";function R(){const[m,h]=o.useState(""),{token:w}=B(t=>t.userInfo),i=E(),[c,n]=o.useState(!1),[f,b]=o.useState([]),[y,k]=o.useState([]),[r,g]=o.useState({minor:!1,major:!1}),[N,v]=o.useState([]),[p,S]=o.useState(null),[C,d]=o.useState({}),[F,j]=o.useState("");o.useEffect(()=>{_()},[]);const _=()=>{u.defaults.headers.common.Authorization=`Bearer ${w}`,u.get(route("registrar_student_list")).then(t=>{const{registrar_recordslist:a,categorize:l,status:x}=t.data;b(a),k(a),v(l)}),window.document.addEventListener("click",t=>{n(!1)}),$(document).on("keyup",t=>{t.keyCode==27&&n(!1)})},z=t=>{const a=t.target.value;if(a){let l=[...y];l=l.filter(x=>x.Student_ID.toString().includes(a)),b(l),n(!0)}else n(!1);h(a)},I=()=>{g({major:!1,minor:!0})},O=()=>{g({major:!0,minor:!1})},A=t=>{S(t.target.value)},D=()=>{d(a=>({...a,isVisible:!1}));const t={student_id:m,offense:r.minor?0:r.major?1:null,categorize_case:parseInt(p),others:F};i(P()),u.post(route("add_violations"),t).then(async a=>{if(a.data.error)i(q());else{const l=await i(W());console.log(l)}}).catch(a=>{console.log({error:a})})},V=()=>{d({title:"Confimation",textMessage:"Do you want to Apply?",isVisible:!0,cancelButton:()=>{d(t=>({...t,isVisible:!1}))},applyButton:D})},L=()=>{};return s(M,{children:[s("div",{className:"mx-8 mt-4",children:[s("div",{className:"mb-3 xl:w-96",children:[e("label",{htmlFor:"exampleFormControlInput1",className:"form-label inline-block mb-2 text-gray-700 uppercase text-xs font-bold",children:"student number"}),s("label",{className:"relative block",children:[e("span",{className:"sr-only",children:"Search"}),e("span",{className:"absolute inset-y-0 left-2 flex items-center pl-2",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})})}),e("input",{className:`placeholder:italic placeholder:text-slate-400 block bg-white w-full border \r
                border-slate-300 rounded-md py-2 pl-12 pr-3  focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm`,value:m,placeholder:"Search for student number",type:"text",name:"student_id",onChange:z}),e("div",{className:`absolute w-full bg-white left-0 max-h-32 overflow-y-auto mt-1 rounded-sm ${c&&" border border-black"} shadow-sm`,children:s("ul",{className:"w-full",children:[c&&f.map((t,a)=>e("li",{className:"w-full py-2 px-3 flex flex-row",children:e("a",{className:"flex-1 text-sm font-semibold",onClick:()=>{h(t.Student_ID),console.log(t.Student_ID),n(!1)},href:"#",children:t.Student_ID})},a)),f.length==0&&c&&e("li",{children:e("div",{className:"pl-4 py-3 text-slate-400 text-xs",children:"Student number does not exists."})})]})})]})]}),s("div",{className:"flex",children:[e("input",{id:"link-checkbox",type:"checkbox",value:0,onChange:I,checked:r.minor,className:`w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 \r
            rounded focus:ring-blue-500 dark:focus:ring-blue-600 transition duration-200`}),e("label",{htmlFor:"link-checkbox",className:"ml-2 font-medium text-gray-900 text-xs uppercase",children:"minor offence"}),e("div",{className:"mx-3"}),e("input",{id:"link-checkbox1",type:"checkbox",value:1,onChange:O,checked:r.major,className:`w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 \r
            rounded focus:ring-blue-500 dark:focus:ring-blue-600 transition duration-200`}),e("label",{htmlFor:"link-checkbox1",className:"ml-2   font-medium text-gray-900 text-xs uppercase",children:"major offence"})]}),s("div",{className:"flex my-4 flex-col",children:[e("label",{htmlFor:"exampleFormControlInput1",className:"form-label inline-block text-gray-700 uppercase text-xs font-bold",children:"Categorize case"}),e("div",{className:"xl:w-96",children:s("select",{onChange:A,defaultValue:0,className:`form-select appearance-none block w-full px-3 py-2 text-sm font-normal text-gray-700\r
                bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0\r
                focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none `,"aria-label":"Default select example",children:[e("option",{value:0,disabled:!0,className:"text-sm",children:"--------"}),N.map((t,a)=>e("option",{className:"text-sm",value:t.id,children:t.description},a))]})})]}),p==6&&s("div",{className:"mb-3 xl:w-96",children:[e("label",{htmlFor:"exampleFormControlInput1",className:"form-label inline-block mb-2 text-gray-700 uppercase text-xs font-bold",children:"Please Specify"}),e("textarea",{type:"text",onChange:t=>j(t.target.value),className:`placeholder:italic placeholder:text-slate-400 block bg-white w-full border \r
                border-slate-300 rounded-md py-1.5 pr-3  focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm h-28`,id:"exampleFormControlInput1"})]}),e("button",{type:"button",className:`inline-block px-6 py-2.5 bg-green-500 text-white font-medium text-xs leading-tight \r
        uppercase rounded shadow-md hover:bg-green-600 hover:shadow-lg focus:bg-green-600 focus:shadow-lg focus:outline-none \r
        focus:ring-0 active:bg-green-700 active:shadow-lg transition duration-150 ease-in-out`,onClick:V,children:"apply"}),e("button",{type:"button",className:`ml-3  inline-block px-6 py-2.5 bg-red-600 text-white font-medium text-xs leading-tight \r
         uppercase rounded shadow-md hover:bg-red-700 hover:shadow-lg focus:bg-red-700 focus:shadow-lg focus:outline-none \r
         focus:ring-0 active:bg-red-800 active:shadow-lg transition duration-150 ease-in-out`,onClick:L,children:"cancel"})]}),e(T,{...C})]})}export{R as default};

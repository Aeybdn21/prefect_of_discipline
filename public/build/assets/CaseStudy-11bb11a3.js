import{r as s,c as g,a as l,j as a}from"./app-6766c3e7.js";import{u as p}from"./index-d88e2845.js";import ce from"./ButtonDanger-267d6a04.js";import de from"./ButtonSuccess-ad03aa9d.js";import me from"./CustomTextArea-fbd39f20.js";import H from"./DisableInputs-72501567.js";import h from"./LabelCheckBox-218800d6.js";import G from"./LabelSelect-a9830478.js";import ue from"./SearchBar-49f9e872.js";import fe from"./TextArea-bf1bb18d.js";import{c as ge}from"./index-a9ae74f2.js";import{l as pe,b as he,a as _e}from"./index-b8b77605.js";import{u as xe}from"./useDispatch-07221b34.js";import"./index-dcfd7a56.js";import"./quill.snow-2cc27678.js";function Ae(){var v,L,z,T,k,F,M,B,A,E,V,j,O,P,q;const o=xe(),[c,_]=s.useState(!1),{utilsdata:J}=p(e=>e.caseStatuses),{utilsdata:K}=p(e=>e.categoryCase),{token:Q}=p(e=>e.userInfo),[n,x]=s.useState(null),[R,d]=s.useState(""),[U,S]=s.useState([]),[W,X]=s.useState([]),[Y,m]=s.useState(""),[b,u]=s.useState(""),[f,C]=s.useState(null),[Z,N]=s.useState(""),[ee,y]=s.useState(null),[te,I]=s.useState(""),[t,w]=s.useState({});s.useEffect(()=>{g.defaults.headers.common.Authorization=`Bearer ${Q}`,g.get(route("registrar_student_list")).then(e=>{const{registrar_recordslist:r}=e.data;S(r),X(r)})},[]);const ae=()=>{_(e=>!e)},se=e=>{d(e.target.value);let r=[...W];r=r.filter(i=>i.Student_ID.toString().includes(e.target.value)||i.Firstname.toLowerCase().toString().includes(e.target.value.toLowerCase())||i.Lastname.toLowerCase().toString().includes(e.target.value.toLowerCase())),S(r),e.target.value||(u(""),m(""))},re=e=>{d(e.Student_ID),u(e.Student_ID),m(`${e.Lastname}, ${e.Firstname} ${e.Middlename[0]}.`)},le=e=>{x(parseInt(e.target.value))},ie=e=>{y(parseInt(e.target.value))},ne=()=>{const e={student_number:b,case_parties_enable:c,case_parties_id:ee,detail_text:Z,categorize_id:n,claimable:f,specify_desc:te};o(pe()),g.post(route("case_study_store"),e).then(async r=>{const i=r.data;i.error?(w(i.data),o(he())):await o(_e())&&D()})},oe=e=>{I(e.target.value)},D=()=>{u(""),d(""),m(""),_(!1),y(null),I(""),x(null),w({}),$("#submit_form").trigger("reset"),document.getElementsByClassName("ql-editor")[0].innerHTML="",N(null)};return l("form",{className:"flex flex-1 flex-col",id:"submit_form",children:[a("div",{className:"my-3 flex flex-1 flex-row justify-end",children:a(ue,{onChangeText:se,onSelectedItem:re,searchValue:R,setDataSearch:U})}),l("div",{className:"flex flex-1 flex-col lg:flex-row gap-3 mb-3",children:[a("div",{className:"w-full lg:w-1/3",children:a(H,{id:"input_student_num",labeltext:"Student Number",setValue:b,error:((v=t.params)==null?void 0:v.includes("student_number"))&&!0,errorMessage:t.error_list&&t.error_list[(L=t.params)==null?void 0:L.findIndex(e=>e=="student_number")]})}),a("div",{className:"w-full lg:w-1/3",children:a(H,{id:"input_fullname",labeltext:"Student Name",setValue:Y})})]}),a(h,{id:"case_id",checked:c,labelname:"Case parties involved",onChange:ae}),a(G,{id:"case_involved",disabled:!c,setData:J,onChange:ie,error:((z=t.params)==null?void 0:z.includes("case_parties_id"))&&!0,errorMessage:t.error_list&&t.error_list[(T=t.params)==null?void 0:T.findIndex(e=>e=="case_parties_id")]}),a(me,{onChange:N,error:((k=t.params)==null?void 0:k.includes("detail_text"))&&!0,errorMessage:t.error_list&&t.error_list[(F=t.params)==null?void 0:F.findIndex(e=>e=="detail_text")]}),l("div",{className:"toolbar mt-20 lg:mt-14",children:[l("label",{htmlFor:"categorize_case",className:ge("text-sm",((M=t.params)==null?void 0:M.includes("categorize_id"))&&"text-red-500"),children:["Categorize Case ",a("span",{className:"text-red-600",children:"*"})]}),a(G,{id:"categorize_case",setData:K,onChange:le,error:((B=t.params)==null?void 0:B.includes("categorize_id"))&&!0,errorMessage:t.error_list&&t.error_list[(A=t.params)==null?void 0:A.findIndex(e=>e=="categorize_id")]})]}),n==6&&l("div",{className:"flex flex-col",children:[l("div",{className:"flex flex-row py-2",children:[a(h,{onChange:()=>C(!0),checked:f==!0,labelname:"Claimable",id:"claim_id",error:((E=t.params)==null?void 0:E.includes("claimable"))&&!0}),a(h,{onChange:()=>C(!1),checked:f==!1,labelname:"Not Claimable",id:"not_claim_id",error:((V=t.params)==null?void 0:V.includes("claimable"))&&!0})]}),((j=t.params)==null?void 0:j.includes("claimable"))&&a("span",{className:"text-sm text-red-500",children:t.error_list&&t.error_list[(O=t.params)==null?void 0:O.findIndex(e=>e=="claimable")]})]}),(n==6||n==7)&&a(fe,{error:((P=t.params)==null?void 0:P.includes("specify_desc"))&&!0,errorMessage:t.error_list&&t.error_list[(q=t.params)==null?void 0:q.findIndex(e=>e=="specify_desc")],labelText:"Specify here",placeholder:"Text here...",onChange:oe}),l("div",{className:"flex flex-row gap-2 my-3",children:[a(de,{buttonText:"Submit",onClick:ne}),a(ce,{buttonText:"Cancel",onClick:D})]})]})}export{Ae as default};

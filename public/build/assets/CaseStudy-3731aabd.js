import{r as s,c as g,a as l,j as a}from"./app-c7618102.js";import{u as p}from"./index-041a5b5b.js";import ce from"./ButtonDanger-8d67c029.js";import de from"./ButtonSuccess-de664a0e.js";import ue from"./CustomTextArea-01f2a8bb.js";import H from"./DisableInputs-808ac647.js";import h from"./LabelCheckBox-bd8d7ad3.js";import G from"./LabelSelect-7f48f4bc.js";import me from"./SearchBar-894d7b55.js";import fe from"./TextArea-e518f6c3.js";import{c as ge}from"./index-a9ae74f2.js";import{u as pe,l as he,b as _e,a as xe}from"./index-670d24a0.js";import"./index-dcfd7a56.js";import"./quill.snow-77abe048.js";function Be(){var v,L,z,T,k,F,M,B,A,E,V,j,O,P,q;const o=pe(),[c,_]=s.useState(!1),{utilsdata:J}=p(e=>e.caseStatuses),{utilsdata:K}=p(e=>e.categoryCase),{token:Q}=p(e=>e.userInfo),[n,x]=s.useState(null),[R,d]=s.useState(""),[U,S]=s.useState([]),[W,X]=s.useState([]),[Y,u]=s.useState(""),[b,m]=s.useState(""),[f,C]=s.useState(null),[Z,N]=s.useState(""),[ee,y]=s.useState(null),[te,I]=s.useState(""),[t,w]=s.useState({});s.useEffect(()=>{g.defaults.headers.common.Authorization=`Bearer ${Q}`,g.get(route("registrar_student_list")).then(e=>{const{registrar_recordslist:r}=e.data;S(r),X(r)})},[]);const ae=()=>{_(e=>!e)},se=e=>{d(e.target.value);let r=[...W];r=r.filter(i=>i.Student_ID.toString().includes(e.target.value)||i.Firstname.toLowerCase().toString().includes(e.target.value.toLowerCase())||i.Lastname.toLowerCase().toString().includes(e.target.value.toLowerCase())),S(r),e.target.value||(m(""),u(""))},re=e=>{d(e.Student_ID),m(e.Student_ID),u(`${e.Lastname}, ${e.Firstname} ${e.Middlename[0]}.`)},le=e=>{x(parseInt(e.target.value))},ie=e=>{y(parseInt(e.target.value))},ne=()=>{const e={student_number:b,case_parties_enable:c,case_parties_id:ee,detail_text:Z,categorize_id:n,claimable:f,specify_desc:te};o(he()),g.post(route("case_study_store"),e).then(async r=>{const i=r.data;i.error?(w(i.data),o(_e())):await o(xe())&&D()})},oe=e=>{I(e.target.value)},D=()=>{m(""),d(""),u(""),_(!1),y(null),I(""),x(null),w({}),$("#submit_form").trigger("reset"),document.getElementsByClassName("ql-editor")[0].innerHTML="",N(null)};return l("form",{className:"flex flex-1 flex-col",id:"submit_form",children:[a("div",{className:"my-3 flex flex-1 flex-row justify-end",children:a(me,{onChangeText:se,onSelectedItem:re,searchValue:R,setDataSearch:U})}),l("div",{className:"flex flex-1 flex-col lg:flex-row gap-3 mb-3",children:[a("div",{className:"w-full lg:w-1/3",children:a(H,{id:"input_student_num",labeltext:"Student Number",setValue:b,error:((v=t.params)==null?void 0:v.includes("student_number"))&&!0,errorMessage:t.error_list&&t.error_list[(L=t.params)==null?void 0:L.findIndex(e=>e=="student_number")]})}),a("div",{className:"w-full lg:w-1/3",children:a(H,{id:"input_fullname",labeltext:"Student Name",setValue:Y})})]}),a(h,{id:"case_id",checked:c,labelname:"Case parties involved",onChange:ae}),a(G,{id:"case_involved",disabled:!c,setData:J,onChange:ie,error:((z=t.params)==null?void 0:z.includes("case_parties_id"))&&!0,errorMessage:t.error_list&&t.error_list[(T=t.params)==null?void 0:T.findIndex(e=>e=="case_parties_id")]}),a(ue,{onChange:N,error:((k=t.params)==null?void 0:k.includes("detail_text"))&&!0,errorMessage:t.error_list&&t.error_list[(F=t.params)==null?void 0:F.findIndex(e=>e=="detail_text")]}),l("div",{className:"toolbar mt-20 lg:mt-14",children:[l("label",{htmlFor:"categorize_case",className:ge("text-sm",((M=t.params)==null?void 0:M.includes("categorize_id"))&&"text-red-500"),children:["Categorize Case ",a("span",{className:"text-red-600",children:"*"})]}),a(G,{id:"categorize_case",setData:K,onChange:le,error:((B=t.params)==null?void 0:B.includes("categorize_id"))&&!0,errorMessage:t.error_list&&t.error_list[(A=t.params)==null?void 0:A.findIndex(e=>e=="categorize_id")]})]}),n==6&&l("div",{className:"flex flex-col",children:[l("div",{className:"flex flex-row py-2",children:[a(h,{onChange:()=>C(!0),checked:f==!0,labelname:"Claimable",id:"claim_id",error:((E=t.params)==null?void 0:E.includes("claimable"))&&!0}),a(h,{onChange:()=>C(!1),checked:f==!1,labelname:"Not Claimable",id:"not_claim_id",error:((V=t.params)==null?void 0:V.includes("claimable"))&&!0})]}),((j=t.params)==null?void 0:j.includes("claimable"))&&a("span",{className:"text-sm text-red-500",children:t.error_list&&t.error_list[(O=t.params)==null?void 0:O.findIndex(e=>e=="claimable")]})]}),(n==6||n==7)&&a(fe,{error:((P=t.params)==null?void 0:P.includes("specify_desc"))&&!0,errorMessage:t.error_list&&t.error_list[(q=t.params)==null?void 0:q.findIndex(e=>e=="specify_desc")],labelText:"Specify here",placeholder:"Text here...",onChange:oe}),l("div",{className:"flex flex-row gap-2 my-3",children:[a(de,{buttonText:"Submit",onClick:ne}),a(ce,{buttonText:"Cancel",onClick:D})]})]})}export{Be as default};

import{r as o,c as l,a as s,F as v,j as t}from"./app-fe5871cc.js";import{c as i}from"./index-a9ae74f2.js";import{L as h}from"./index.es-1d18b60d.js";import{E as w,L as D}from"./99297-loading-files-9e06f5df.js";import{a as C}from"./index-b6042d42.js";import S from"./DropdownMenu-b2953f75.js";import{O}from"./OpenDetialsModal-4e2a6517.js";import E from"./Paginations-847b2290.js";import{u as A}from"./useDispatch-82ff32a5.js";import"./index-214273b9.js";import"./index-7c0a6257.js";import"./transition-3a983702.js";import"./quill.snow-5ad4fe63.js";import"./dialog-e9a84081.js";function G(){const[r,f]=o.useState([]),{token:u}=C(e=>e.userInfo),[c,d]=o.useState(!1),[x,m]=o.useState({});A(),o.useEffect(()=>{p()},[]);const p=async()=>{d(!0);try{l.defaults.headers.common.Authorization=`Bearer ${u}`;const e=await l.post(route("show_investigations"));f(e.data.datalists),d(!1)}catch(e){console.log({error:e})}},y=e=>{switch(e){case 1:return"text-red-400";case 2:return"text-red-600";case 3:return"text-green-500"}},g=e=>{},N=e=>{m(n=>({...n,isVisible:!0,onChangeClose(){m(a=>({...a,isVisible:!1}))},body:e.data.details_html,student_info:`${e.data.student_info.year_section} ${e.data.student_info.student_fullname}`,datetime:e.data.created_at}))},b=e=>{},_=e=>{const n={student_id:e.data.student_num,offense:null,categorize_case:e.data.categorize_id,others:e.data.specify_desc,investigation_id:e.data.id};l.post(route("add_violations"),n).then(async a=>{a.data.error||p()}).catch(a=>{console.log({error:a})})};return s(v,{children:[s("div",{className:i("relative"),children:[t("div",{className:"flex flex-row justify-end px-4 py-3",children:t("div",{className:"my-auto search-boxContainer d-none d-lg-block mr-2",children:t("input",{type:"text",className:"form-control search-box",placeholder:"Search...","aria-label":"Example text with button addon","aria-describedby":"button-addon1"})})}),t("div",{className:i("overflow-auto  w-full rounded-lg","border border-gray-200 shadow "),children:s("table",{className:i("w-full border-collapse","bg-white text-left","text-sm text-gray-500 "),children:[t("thead",{className:"bg-gray-200",children:s("tr",{children:[t("th",{scope:"col",className:i("px-6 py-4 font-bold text-gray-600 "),children:"Student number"}),t("th",{scope:"col",className:"px-6 py-4 font-medium text-gray-900 ",children:"Student Information"}),t("th",{scope:"col",className:"px-6 py-4 font-medium text-gray-900 ",children:"Case Parties involved"}),t("th",{scope:"col",className:"px-6 py-4 font-medium text-gray-900 ",children:"Violation Case"}),t("th",{scope:"col",className:"px-6 py-4 font-medium text-gray-900 ",children:"Violation Details"}),t("th",{scope:"col",className:"px-6 py-4 font-medium text-gray-900 text-center",children:"Approve by"}),t("th",{scope:"col",className:"px-6 py-4 font-medium text-gray-900"})]})}),s("tbody",{className:"divide-y divide-gray-100 border-t border-gray-100",children:[r.map((e,n)=>{var a;return s("tr",{className:"hover:bg-gray-50 ",children:[s("th",{className:" px-10 py-4",children:[t("div",{className:"font-bold",children:e.student_num}),e.is_recorded&&t("div",{className:"font-bold capitalize text-[8.5px] text-green-600",children:"Already recorded"})]}),t("th",{className:"gap-3 px-6 py-3 font-normal text-gray-900",children:s("div",{className:"text-sm",children:[t("div",{className:i(e.is_recorded?"text-green-600":"text-gray-700"),children:e.student_info.year_section}),t("div",{className:i(e.is_recorded?"text-green-600":"font-medium text-gray-500"),children:e.student_info.student_fullname}),t("div",{className:"text-gray-400",children:e.student_info.Email}),t("div",{className:"text-gray-400",children:e.student_info.Contact_No&&e.student_info.contact_num63})]})}),t("td",{className:"px-6 py-3 ",children:t("div",{className:"text-sm font-semibold",children:((a=e.case_parties)==null?void 0:a.description)||"------"})}),s("th",{className:"px-6 py-3",children:[t("div",{className:"font-bold",children:e.violation_case.description}),e.claimable&&t("div",{className:"font-normal text-xs",children:e.claimable})]}),t("td",{className:"px-6 py-3 max-w-[20rem]",children:e.specify_desc||"------"}),t("th",{className:"",children:t("div",{className:i("font-bold text-center",y(e.investigate_status_id)),children:e.investigation_status.description})}),t("td",{children:t(S,{onChangeEdit:()=>g(),onChangeOpenDetails:()=>N({data:e,index:n}),onChangeDelete:()=>b(),onChangeApply:()=>_({data:e,index:n}),isRecorded:e.is_recorded})})]},n)}),r.length<=0&&!c&&t("tr",{children:t("td",{colSpan:7,className:"pb-4",children:s("div",{className:"flex flex-col items-center",children:[t(h,{style:{width:100,height:100},animationData:w,loop:!0}),t("span",{className:"uppercase text-sm",children:"no record found"})]})})}),c&&r.length<=0&&t("tr",{children:t("td",{colSpan:7,className:"pb-4",children:s("div",{className:"flex flex-col items-center",children:[t(h,{style:{width:120,height:120},animationData:D,loop:!0}),s("span",{className:"uppercase text-sm font-bold",children:["   "," loading ..."]})]})})})]})]})}),t("div",{className:"flex flex-row justify-end my-3 -z-20",children:t(E,{})}),t("div",{className:"my-36"})]}),t(O,{...x})]})}export{G as default};
